<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="ChangeFolderIcon.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ChangeFolderIcon.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid Margin="40,32,40,32">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Page Header -->
                <Grid Grid.Row="0" Margin="0,0,0,32">
                    <StackPanel>
                        <TextBlock x:Uid="SettingsPage_Title" 
                                   Text="Settings" 
                                   Style="{ThemeResource TitleLargeTextBlockStyle}"
                                   FontWeight="SemiBold"/>
                        <TextBlock x:Uid="SettingsPage_Subtitle" 
                                   Text="Customize your app experience"
                                   Style="{ThemeResource BodyTextBlockStyle}"
                                   Opacity="0.6"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Settings Content -->
                <StackPanel Grid.Row="1" Spacing="24">
                    <!-- Language Settings Card -->
                    <Border CornerRadius="8" 
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Padding="24,20">
                        <StackPanel Spacing="16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <FontIcon Glyph="&#xE775;" 
                                          FontSize="20" 
                                          Margin="0,0,12,0"
                                          VerticalAlignment="Center"/>
                                <StackPanel Grid.Column="1" Spacing="4">
                                    <TextBlock x:Uid="SettingsPage_Language" 
                                               Text="Language" 
                                               Style="{ThemeResource SubtitleTextBlockStyle}"
                                               FontWeight="SemiBold"/>
                                    <TextBlock x:Uid="SettingsPage_Language_Description" 
                                               Text="Choose the display language for the application"
                                               Style="{ThemeResource CaptionTextBlockStyle}"
                                               Opacity="0.8"
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                            <ComboBox x:Name="LanguageComboBox" 
                                      Width="280" 
                                      HorizontalAlignment="Left"
                                      SelectionChanged="LanguageComboBox_SelectionChanged">
                                <ComboBoxItem Tag="en-US">
                                    <TextBlock x:Uid="SettingsPage_Language_English" Text="English"/>
                                </ComboBoxItem>
                                <ComboBoxItem Tag="zh-Hans">
                                    <TextBlock x:Uid="SettingsPage_Language_Chinese" Text="简体中文"/>
                                </ComboBoxItem>
                            </ComboBox>
                            <InfoBar x:Uid="SettingsPage_Language_RestartInfo"
                                     IsOpen="False"
                                     x:Name="LanguageRestartInfoBar"
                                     Severity="Informational"
                                     Title="Restart required"
                                     Message="Please restart the application to apply the language change."
                                     IsClosable="True"/>
                        </StackPanel>
                    </Border>

                    <!-- Appearance Settings Card -->
                    <Border CornerRadius="8" 
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Padding="24,20">
                        <StackPanel Spacing="24">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <FontIcon Glyph="&#xE790;" 
                                          FontSize="20" 
                                          Margin="0,0,12,0"
                                          VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1"
                                           x:Uid="SettingsPage_Appearance" 
                                           Text="Appearance" 
                                           Style="{ThemeResource SubtitleTextBlockStyle}"
                                           FontWeight="SemiBold"/>
                            </Grid>

                            <!-- Theme Selection -->
                            <StackPanel Spacing="12">
                                <TextBlock x:Uid="SettingsPage_Theme" 
                                           Text="App Theme" 
                                           Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                                <RadioButtons x:Name="ThemeRadioButtons" 
                                              SelectionChanged="ThemeRadioButtons_SelectionChanged">
                                    <RadioButton Tag="Light">
                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <FontIcon Glyph="&#xE706;" FontSize="16"/>
                                            <TextBlock x:Uid="SettingsPage_Theme_Light" Text="Light"/>
                                        </StackPanel>
                                    </RadioButton>
                                    <RadioButton Tag="Dark">
                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <FontIcon Glyph="&#xE708;" FontSize="16"/>
                                            <TextBlock x:Uid="SettingsPage_Theme_Dark" Text="Dark"/>
                                        </StackPanel>
                                    </RadioButton>
                                    <RadioButton Tag="Default">
                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <FontIcon Glyph="&#xE770;" FontSize="16"/>
                                            <TextBlock x:Uid="SettingsPage_Theme_System" Text="Use system setting"/>
                                        </StackPanel>
                                    </RadioButton>
                                </RadioButtons>
                            </StackPanel>

                            <Rectangle Height="1" 
                                       Fill="{ThemeResource DividerStrokeColorDefaultBrush}"
                                       Margin="-24,0"/>

                            <!-- Backdrop Selection -->
                            <StackPanel Spacing="12">
                                <StackPanel Spacing="4">
                                    <TextBlock x:Uid="SettingsPage_Backdrop" 
                                               Text="Window Backdrop" 
                                               Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                                    <TextBlock x:Uid="SettingsPage_Backdrop_Description"
                                               Text="Choose the visual effect for the window background"
                                               Style="{ThemeResource CaptionTextBlockStyle}"
                                               Opacity="0.8"/>
                                </StackPanel>
                                <RadioButtons x:Name="BackdropRadioButtons" 
                                              SelectionChanged="BackdropRadioButtons_SelectionChanged">
                                    <RadioButton Tag="Mica">
                                        <StackPanel Spacing="4">
                                            <TextBlock x:Uid="SettingsPage_Backdrop_Mica" Text="Mica"/>
                                            <TextBlock x:Uid="SettingsPage_Backdrop_Mica_Description" 
                                                       Text="Subtle transparency that adapts to desktop wallpaper"
                                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                                       Opacity="0.6"/>
                                        </StackPanel>
                                    </RadioButton>
                                    <RadioButton Tag="Acrylic">
                                        <StackPanel Spacing="4">
                                            <TextBlock x:Uid="SettingsPage_Backdrop_Acrylic" Text="Acrylic"/>
                                            <TextBlock x:Uid="SettingsPage_Backdrop_Acrylic_Description" 
                                                       Text="Blurred transparency effect"
                                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                                       Opacity="0.6"/>
                                        </StackPanel>
                                    </RadioButton>
                                    <RadioButton Tag="Transparent">
                                        <StackPanel Spacing="4">
                                            <TextBlock x:Uid="SettingsPage_Backdrop_Transparent" Text="None"/>
                                            <TextBlock x:Uid="SettingsPage_Backdrop_Transparent_Description" 
                                                       Text="No transparency effect"
                                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                                       Opacity="0.6"/>
                                        </StackPanel>
                                    </RadioButton>
                                </RadioButtons>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Icon Pack Settings Card -->
                    <Border CornerRadius="8" 
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Padding="24,20">
                        <StackPanel Spacing="16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <FontIcon Glyph="&#xE8F1;" 
                                          FontSize="20" 
                                          Margin="0,0,12,0"
                                          VerticalAlignment="Center"/>
                                <StackPanel Grid.Column="1" Spacing="4">
                                    <TextBlock x:Uid="SettingsPage_IconPack" 
                                               Text="Icon Pack" 
                                               Style="{ThemeResource SubtitleTextBlockStyle}"
                                               FontWeight="SemiBold"/>
                                    <TextBlock x:Uid="SettingsPage_IconPack_Description" 
                                               Text="Manage the icon pack from the GitHub repository"
                                               Style="{ThemeResource CaptionTextBlockStyle}"
                                               Opacity="0.8"
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>

                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Button x:Name="UpdateIconsButton" 
                                        Grid.Column="0"
                                        Click="UpdateIconsButton_Click"
                                        Style="{ThemeResource AccentButtonStyle}">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon Glyph="&#xE777;" FontSize="16"/>
                                        <TextBlock x:Uid="SettingsPage_IconPack_Update" Text="Check for Updates"/>
                                    </StackPanel>
                                </Button>

                                <StackPanel Grid.Column="1" 
                                            VerticalAlignment="Center"
                                            Spacing="4">
                                    <ProgressRing x:Name="UpdateProgressRing" 
                                                  IsIndeterminate="True" 
                                                  Visibility="Collapsed" 
                                                  Width="20" 
                                                  Height="20" 
                                                  HorizontalAlignment="Left"/>
                                    <TextBlock x:Name="IconPackStatusTextBlock" 
                                               Style="{ThemeResource CaptionTextBlockStyle}"
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- About Section -->
                    <Border CornerRadius="8" 
                            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                            BorderThickness="1"
                            Padding="24,20">
                        <StackPanel Spacing="16">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <FontIcon Glyph="&#xE946;" 
                                          FontSize="20" 
                                          Margin="0,0,12,0"
                                          VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1"
                                           x:Uid="SettingsPage_About" 
                                           Text="About" 
                                           Style="{ThemeResource SubtitleTextBlockStyle}"
                                           FontWeight="SemiBold"/>
                            </Grid>

                            <StackPanel Spacing="8">
                                <TextBlock x:Uid="SettingsPage_AppName" 
                                           Text="Change Folder Icon"
                                           Style="{ThemeResource BodyStrongTextBlockStyle}"/>
                                <TextBlock x:Uid="SettingsPage_Version" 
                                           Text="Version 1.0.0"
                                           Style="{ThemeResource CaptionTextBlockStyle}"
                                           Opacity="0.8"/>
                                <HyperlinkButton x:Uid="SettingsPage_GitHub"
                                                 Content="View on GitHub"
                                                 NavigateUri="https://github.com/YILING0013/ChangeFolderIcon"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>